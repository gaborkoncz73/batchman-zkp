{
  "predicates": [
    {
      "name": "applySavingsSupport",
      "arity": 4,
      "clauses": [
        {
          "children": [
            {
              "name": "support_matrix",
              "arity": 4
            },
            {
              "name": "applySupport",
              "arity": 4
            }
          ],
          "equalities": [
            {
              "left": {
                "node": 1,
                "arg": 2,
                "list_index": 0
              },
              "right": {
                "node": 2,
                "arg": 1,
                "list_index": 0
              }
            },
            {
              "left": {
                "node": 0,
                "arg": 2,
                "list_index": 0
              },
              "right": {
                "node": 1,
                "arg": 0,
                "list_index": 0
              }
            },
            {
              "left": {
                "node": 0,
                "arg": 0,
                "list_index": 0
              },
              "right": {
                "node": 2,
                "arg": 0,
                "list_index": 0
              }
            },
            {
              "left": {
                "node": 0,
                "arg": 3,
                "list_index": 0
              },
              "right": {
                "node": 2,
                "arg": 3,
                "list_index": 0
              }
            },
            {
              "left": {
                "node": 1,
                "arg": 3,
                "list_index": 0
              },
              "right": {
                "node": 2,
                "arg": 2,
                "list_index": 0
              }
            },
            {
              "left": {
                "node": 0,
                "arg": 1,
                "list_index": 0
              },
              "right": {
                "node": 1,
                "arg": 1,
                "list_index": 0
              }
            }
          ],
          "builtins": []
        }
      ]
    },
    {
      "name": "applySocialSupports",
      "arity": 3,
      "clauses": [
        {
          "children": [
            {
              "name": "applySupport",
              "arity": 4
            },
            {
              "name": "applySocialSupports",
              "arity": 3
            }
          ],
          "equalities": [
            {
              "left": {
                "node": 0,
                "arg": 1,
                "list_index": 2
              },
              "right": {
                "node": 1,
                "arg": 2,
                "list_index": 0
              }
            },
            {
              "left": {
                "node": 0,
                "arg": 1,
                "list_index": 1
              },
              "right": {
                "node": 1,
                "arg": 1,
                "list_index": 0
              }
            },
            {
              "left": {
                "node": 0,
                "arg": 2,
                "list_index": 0
              },
              "right": {
                "node": 2,
                "arg": 2,
                "list_index": 0
              }
            },
            {
              "left": {
                "node": 1,
                "arg": 3,
                "list_index": 0
              },
              "right": {
                "node": 2,
                "arg": 0,
                "list_index": 0
              }
            },
            {
              "left": {
                "node": 0,
                "arg": 0,
                "list_index": 0
              },
              "right": {
                "node": 1,
                "arg": 0,
                "list_index": 0
              }
            },
            {
              "left": {
                "node": 0,
                "arg": 1,
                "list_index": 3
              },
              "right": {
                "node": 2,
                "arg": 1,
                "list_index": 0
              }
            }
          ],
          "builtins": []
        },
        {
          "children": [],
          "equalities": [
            {
              "left": {
                "node": 0,
                "arg": 0,
                "list_index": 0
              },
              "right": {
                "node": 0,
                "arg": 2,
                "list_index": 0
              }
            }
          ],
          "builtins": []
        }
      ]
    },
    {
      "name": "applySupport",
      "arity": 4,
      "clauses": [
        {
          "children": [],
          "equalities": [
            {
              "left": {
                "node": 0,
                "arg": 1,
                "list_index": 0
              },
              "right": "nominal"
            }
          ],
          "builtins": [
            {
              "operator": "is",
              "operands": [
                {
                  "kind": "Ref",
                  "node": 0,
                  "arg": 3
                },
                {
                  "kind": "BuiltIn",
                  "operator": "-",
                  "operands": [
                    {
                      "kind": "Ref",
                      "node": 0,
                      "arg": 0
                    },
                    {
                      "kind": "Ref",
                      "node": 0,
                      "arg": 2
                    }
                  ]
                }
              ]
            }
          ]
        },
        {
          "children": [],
          "equalities": [
            {
              "left": {
                "node": 0,
                "arg": 1,
                "list_index": 0
              },
              "right": "percent"
            }
          ],
          "builtins": [
            {
              "operator": "is",
              "operands": [
                {
                  "kind": "Var",
                  "name": "AmountToBeSubtracted"
                },
                {
                  "kind": "BuiltIn",
                  "operator": "*",
                  "operands": [
                    {
                      "kind": "Ref",
                      "node": 0,
                      "arg": 0
                    },
                    {
                      "kind": "BuiltIn",
                      "operator": "div",
                      "operands": [
                        {
                          "kind": "Ref",
                          "node": 0,
                          "arg": 2
                        },
                        {
                          "kind": "Atom",
                          "value": "100"
                        }
                      ]
                    }
                  ]
                }
              ]
            },
            {
              "operator": "is",
              "operands": [
                {
                  "kind": "Ref",
                  "node": 0,
                  "arg": 3
                },
                {
                  "kind": "BuiltIn",
                  "operator": "-",
                  "operands": [
                    {
                      "kind": "Ref",
                      "node": 0,
                      "arg": 0
                    },
                    {
                      "kind": "Var",
                      "name": "AmountToBeSubtracted"
                    }
                  ]
                }
              ]
            }
          ]
        }
      ]
    },
    {
      "name": "consumptionClass",
      "arity": 2,
      "clauses": [
        {
          "children": [
            {
              "name": "rolling_treshold",
              "arity": 2
            }
          ],
          "equalities": [
            {
              "left": {
                "node": 1,
                "arg": 0,
                "list_index": 0
              },
              "right": "'high'"
            },
            {
              "left": {
                "node": 0,
                "arg": 1,
                "list_index": 0
              },
              "right": "'high'"
            }
          ],
          "builtins": [
            {
              "operator": ">",
              "operands": [
                {
                  "kind": "Ref",
                  "node": 0,
                  "arg": 0
                },
                {
                  "kind": "Ref",
                  "node": 1,
                  "arg": 1
                }
              ]
            },
            {
              "operator": "=",
              "operands": [
                {
                  "kind": "Ref",
                  "node": 0,
                  "arg": 1
                },
                {
                  "kind": "Atom",
                  "value": "'high'"
                }
              ]
            }
          ]
        },
        {
          "children": [
            {
              "name": "rolling_treshold",
              "arity": 2
            }
          ],
          "equalities": [
            {
              "left": {
                "node": 1,
                "arg": 0,
                "list_index": 0
              },
              "right": "'mid'"
            },
            {
              "left": {
                "node": 0,
                "arg": 1,
                "list_index": 0
              },
              "right": "'mid'"
            }
          ],
          "builtins": [
            {
              "operator": ">",
              "operands": [
                {
                  "kind": "Ref",
                  "node": 0,
                  "arg": 0
                },
                {
                  "kind": "Ref",
                  "node": 1,
                  "arg": 1
                }
              ]
            },
            {
              "operator": "=",
              "operands": [
                {
                  "kind": "Ref",
                  "node": 0,
                  "arg": 1
                },
                {
                  "kind": "Atom",
                  "value": "'mid'"
                }
              ]
            }
          ]
        },
        {
          "children": [],
          "equalities": [
            {
              "left": {
                "node": 0,
                "arg": 0,
                "list_index": 0
              },
              "right": "_RollingConsumptionVar"
            },
            {
              "left": {
                "node": 0,
                "arg": 1,
                "list_index": 0
              },
              "right": "'low'"
            }
          ],
          "builtins": [
            {
              "operator": "=",
              "operands": [
                {
                  "kind": "Ref",
                  "node": 0,
                  "arg": 1
                },
                {
                  "kind": "Atom",
                  "value": "'low'"
                }
              ]
            }
          ]
        }
      ]
    },
    {
      "name": "endPrice",
      "arity": 1,
      "clauses": [
        {
          "children": [
            {
              "name": "monthlyConsumptions",
              "arity": 1
            },
            {
              "name": "sumOfMonthlyConsumptions",
              "arity": 2
            },
            {
              "name": "rollingConsumption",
              "arity": 2
            },
            {
              "name": "currentConsumption",
              "arity": 1
            },
            {
              "name": "consumptionClass",
              "arity": 2
            },
            {
              "name": "savingsClass",
              "arity": 3
            },
            {
              "name": "priceBase",
              "arity": 1
            },
            {
              "name": "applySavingsSupport",
              "arity": 4
            },
            {
              "name": "socialCreds",
              "arity": 1
            },
            {
              "name": "applySocialSupports",
              "arity": 3
            }
          ],
          "equalities": [
            {
              "left": {
                "node": 5,
                "arg": 1,
                "list_index": 0
              },
              "right": {
                "node": 8,
                "arg": 2,
                "list_index": 0
              }
            },
            {
              "left": {
                "node": 1,
                "arg": 0,
                "list_index": 0
              },
              "right": {
                "node": 2,
                "arg": 0,
                "list_index": 0
              }
            },
            {
              "left": {
                "node": 8,
                "arg": 3,
                "list_index": 0
              },
              "right": {
                "node": 10,
                "arg": 0,
                "list_index": 0
              }
            },
            {
              "left": {
                "node": 0,
                "arg": 0,
                "list_index": 0
              },
              "right": {
                "node": 10,
                "arg": 2,
                "list_index": 0
              }
            },
            {
              "left": {
                "node": 3,
                "arg": 1,
                "list_index": 0
              },
              "right": {
                "node": 5,
                "arg": 0,
                "list_index": 0
              }
            },
            {
              "left": {
                "node": 3,
                "arg": 1,
                "list_index": 0
              },
              "right": {
                "node": 6,
                "arg": 0,
                "list_index": 0
              }
            },
            {
              "left": {
                "node": 4,
                "arg": 0,
                "list_index": 0
              },
              "right": {
                "node": 6,
                "arg": 1,
                "list_index": 0
              }
            },
            {
              "left": {
                "node": 6,
                "arg": 2,
                "list_index": 0
              },
              "right": {
                "node": 8,
                "arg": 1,
                "list_index": 0
              }
            },
            {
              "left": {
                "node": 2,
                "arg": 1,
                "list_index": 0
              },
              "right": {
                "node": 3,
                "arg": 0,
                "list_index": 0
              }
            },
            {
              "left": {
                "node": 7,
                "arg": 0,
                "list_index": 0
              },
              "right": {
                "node": 8,
                "arg": 0,
                "list_index": 0
              }
            },
            {
              "left": {
                "node": 9,
                "arg": 0,
                "list_index": 0
              },
              "right": {
                "node": 10,
                "arg": 1,
                "list_index": 0
              }
            }
          ],
          "builtins": []
        }
      ]
    },
    {
      "name": "inputPriceOk",
      "arity": 0,
      "clauses": [
        {
          "children": [
            {
              "name": "endPrice",
              "arity": 1
            },
            {
              "name": "inputPayment",
              "arity": 1
            }
          ],
          "equalities": [
            {
              "left": {
                "node": 1,
                "arg": 0,
                "list_index": 0
              },
              "right": {
                "node": 2,
                "arg": 0,
                "list_index": 0
              }
            }
          ],
          "builtins": []
        }
      ]
    },
    {
      "name": "monthlyConsumptions",
      "arity": 1,
      "clauses": [
        {
          "children": [],
          "equalities": [],
          "builtins": [
            {
              "operator": "=",
              "operands": [
                {
                  "kind": "Ref",
                  "node": 0,
                  "arg": 0
                },
                {
                  "kind": "Atom",
                  "value": "[]_or_list"
                }
              ]
            }
          ]
        }
      ]
    },
    {
      "name": "priceBase",
      "arity": 1,
      "clauses": [
        {
          "children": [
            {
              "name": "currentConsumption",
              "arity": 1
            },
            {
              "name": "currentPrice",
              "arity": 2
            }
          ],
          "equalities": [
            {
              "left": {
                "node": 2,
                "arg": 1,
                "list_index": 0
              },
              "right": "'HUF'"
            }
          ],
          "builtins": [
            {
              "operator": "is",
              "operands": [
                {
                  "kind": "Ref",
                  "node": 0,
                  "arg": 0
                },
                {
                  "kind": "BuiltIn",
                  "operator": "*",
                  "operands": [
                    {
                      "kind": "Ref",
                      "node": 2,
                      "arg": 0
                    },
                    {
                      "kind": "Ref",
                      "node": 1,
                      "arg": 0
                    }
                  ]
                }
              ]
            }
          ]
        }
      ]
    },
    {
      "name": "rollingConsumption",
      "arity": 2,
      "clauses": [
        {
          "children": [],
          "equalities": [],
          "builtins": [
            {
              "operator": "is",
              "operands": [
                {
                  "kind": "Ref",
                  "node": 0,
                  "arg": 1
                },
                {
                  "kind": "BuiltIn",
                  "operator": "div",
                  "operands": [
                    {
                      "kind": "Ref",
                      "node": 0,
                      "arg": 0
                    },
                    {
                      "kind": "Atom",
                      "value": "12"
                    }
                  ]
                }
              ]
            }
          ]
        }
      ]
    },
    {
      "name": "savingsClass",
      "arity": 3,
      "clauses": [
        {
          "children": [
            {
              "name": "savings_treshold",
              "arity": 2
            }
          ],
          "equalities": [
            {
              "left": {
                "node": 1,
                "arg": 0,
                "list_index": 0
              },
              "right": "'high'"
            },
            {
              "left": {
                "node": 0,
                "arg": 2,
                "list_index": 0
              },
              "right": "'high'"
            }
          ],
          "builtins": [
            {
              "operator": "is",
              "operands": [
                {
                  "kind": "Var",
                  "name": "CurrentSaving"
                },
                {
                  "kind": "BuiltIn",
                  "operator": "-",
                  "operands": [
                    {
                      "kind": "Ref",
                      "node": 0,
                      "arg": 0
                    },
                    {
                      "kind": "Ref",
                      "node": 0,
                      "arg": 1
                    }
                  ]
                }
              ]
            },
            {
              "operator": ">",
              "operands": [
                {
                  "kind": "Var",
                  "name": "CurrentSaving"
                },
                {
                  "kind": "Ref",
                  "node": 1,
                  "arg": 1
                }
              ]
            },
            {
              "operator": "=",
              "operands": [
                {
                  "kind": "Ref",
                  "node": 0,
                  "arg": 2
                },
                {
                  "kind": "Atom",
                  "value": "'high'"
                }
              ]
            }
          ]
        },
        {
          "children": [
            {
              "name": "savings_treshold",
              "arity": 2
            }
          ],
          "equalities": [
            {
              "left": {
                "node": 1,
                "arg": 0,
                "list_index": 0
              },
              "right": "'mid'"
            },
            {
              "left": {
                "node": 0,
                "arg": 2,
                "list_index": 0
              },
              "right": "'mid'"
            }
          ],
          "builtins": [
            {
              "operator": "is",
              "operands": [
                {
                  "kind": "Var",
                  "name": "CurrentSaving"
                },
                {
                  "kind": "BuiltIn",
                  "operator": "-",
                  "operands": [
                    {
                      "kind": "Ref",
                      "node": 0,
                      "arg": 0
                    },
                    {
                      "kind": "Ref",
                      "node": 0,
                      "arg": 1
                    }
                  ]
                }
              ]
            },
            {
              "operator": ">",
              "operands": [
                {
                  "kind": "Var",
                  "name": "CurrentSaving"
                },
                {
                  "kind": "Ref",
                  "node": 1,
                  "arg": 1
                }
              ]
            },
            {
              "operator": "=",
              "operands": [
                {
                  "kind": "Ref",
                  "node": 0,
                  "arg": 2
                },
                {
                  "kind": "Atom",
                  "value": "'mid'"
                }
              ]
            }
          ]
        },
        {
          "children": [
            {
              "name": "savings_treshold",
              "arity": 2
            }
          ],
          "equalities": [
            {
              "left": {
                "node": 1,
                "arg": 0,
                "list_index": 0
              },
              "right": "'low'"
            },
            {
              "left": {
                "node": 0,
                "arg": 2,
                "list_index": 0
              },
              "right": "'low'"
            }
          ],
          "builtins": [
            {
              "operator": "is",
              "operands": [
                {
                  "kind": "Var",
                  "name": "CurrentSaving"
                },
                {
                  "kind": "BuiltIn",
                  "operator": "-",
                  "operands": [
                    {
                      "kind": "Ref",
                      "node": 0,
                      "arg": 0
                    },
                    {
                      "kind": "Ref",
                      "node": 0,
                      "arg": 1
                    }
                  ]
                }
              ]
            },
            {
              "operator": ">",
              "operands": [
                {
                  "kind": "Var",
                  "name": "CurrentSaving"
                },
                {
                  "kind": "Ref",
                  "node": 1,
                  "arg": 1
                }
              ]
            },
            {
              "operator": "=",
              "operands": [
                {
                  "kind": "Ref",
                  "node": 0,
                  "arg": 2
                },
                {
                  "kind": "Atom",
                  "value": "'low'"
                }
              ]
            }
          ]
        },
        {
          "children": [],
          "equalities": [
            {
              "left": {
                "node": 0,
                "arg": 2,
                "list_index": 0
              },
              "right": "'none'"
            }
          ],
          "builtins": [
            {
              "operator": "=",
              "operands": [
                {
                  "kind": "Ref",
                  "node": 0,
                  "arg": 2
                },
                {
                  "kind": "Atom",
                  "value": "'none'"
                }
              ]
            }
          ]
        }
      ]
    },
    {
      "name": "socialCreds",
      "arity": 1,
      "clauses": [
        {
          "children": [],
          "equalities": [],
          "builtins": [
            {
              "operator": "=",
              "operands": [
                {
                  "kind": "Ref",
                  "node": 0,
                  "arg": 0
                },
                {
                  "kind": "Atom",
                  "value": "[]_or_list"
                }
              ]
            }
          ]
        }
      ]
    },
    {
      "name": "sumOfMonthlyConsumptions",
      "arity": 2,
      "clauses": [
        {
          "children": [
            {
              "name": "sumOfMonthlyConsumptions",
              "arity": 2
            }
          ],
          "equalities": [
            {
              "left": {
                "node": 0,
                "arg": 0,
                "list_index": 2
              },
              "right": {
                "node": 1,
                "arg": 0,
                "list_index": 0
              }
            }
          ],
          "builtins": [
            {
              "operator": "is",
              "operands": [
                {
                  "kind": "Ref",
                  "node": 0,
                  "arg": 1
                },
                {
                  "kind": "BuiltIn",
                  "operator": "+",
                  "operands": [
                    {
                      "kind": "Ref",
                      "node": 1,
                      "arg": 1
                    },
                    {
                      "kind": "Ref",
                      "node": 0,
                      "arg": 0
                    }
                  ]
                }
              ]
            }
          ]
        },
        {
          "children": [],
          "equalities": [
            {
              "left": {
                "node": 0,
                "arg": 1,
                "list_index": 0
              },
              "right": "0"
            }
          ],
          "builtins": []
        }
      ]
    }
  ]
}